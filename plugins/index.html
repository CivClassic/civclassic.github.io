<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" href="../img/logo_patreon.png">
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Plugins - CivClassic</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    
    <!-- Custom CSS -->
    <link href="../css/stylish-portfolio.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <!-- Navigation -->
    <a id="menu-toggle" href="#" class="btn btn-dark btn-lg toggle"><i class="fa fa-bars"></i></a>
    <nav id="sidebar-wrapper">
        <ul class="sidebar-nav">
            <a id="menu-close" href="#" class="btn btn-light btn-lg pull-right toggle"><i class="fa fa-times"></i></a>
            <li class="sidebar-brand">
                <a href="/" onclick=$("#menu-close").click();>Home</a>
            </li>
            <li>
                <a href="#Citadel" onclick=$("#menu-close").click();>Citadel</a>
            </li>
            <li>
                <a href="#PrisonPearl" onclick=$("#menu-close").click();>PrisonPearl</a>
            </li>
            <li>
                <a href="#Bastion" onclick=$("#menu-close").click();>Bastion</a>
            </li>
            <li>
                <a href="#JukeAlert" onclick=$("#menu-close").click();>JukeAlert</a>
            </li>
            <li>
                <a href="#FactoryMod" onclick=$("#menu-close").click();>FactoryMod</a>
            </li>
            <li>
                <a href="#NameLayer" onclick=$("#menu-close").click();>NameLayer</a>
            </li>
            <li>
                <a href="#Enchanting" onclick=$("#menu-close").click();>Enchanting</a>
            </li>
            <li>
                <a href="#PvPTweaks" onclick=$("#menu-close").click();>PvPTweaks</a>
            </li>
            <li>
                <a href="#HiddenOre" onclick=$("#menu-close").click();>HiddenOre</a>
            </li>
            <li>
                <a href="#SecureLogin" onclick=$("#menu-close").click();>SecureLogin</a>
            </li>
            <li>
                <a href="#MiscPlugins" onclick=$("#menu-close").click();>Misc Plugins</a>
            </li>
        </ul>
    </nav>
    
    <!-- Citadel -->
    <section id="Citadel" class="about bg-primary green">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h2 class="text-center">Citadel -  Protect your blocks</h2>
                    <p class="lead text-center">Citadel allows you to reinforce your blocks with common items such as stone, iron, and diamond. Reinforced blocks must be broken multiple times, making it harder for people to destroy your stuff. Block that open such as doors and chests will also be locked.</p>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- PrisonPearl -->
    <section id="PrisonPearl" class="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>PrisonPearl - Take justice into your own hands</h2>
                    <p class="lead">When you kill a player with an ender pearl in your hotbar they'll be sent to the end. They'll remain there until you free them or they're freed by others. Be wary because the person you imprison can call on others to help them break free. Used in conjunction with Citadel it's a powerful tool to take power into your own hands.</p>
                    <p class="lead">You can play on as many alts as you want, but if you're pearled on any of them, the others will be unable to log in until your account is freed <span id="pearlcost"></span></p>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- Bastion -->
    <section id="Bastion" class="about bg-primary green">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Bastion - Protect your claims from grief</h2>
                    <p class="lead">Bastions will create a field above and around them where others cannot place blocks. This provides a powerful anti-grief tool to keep your city clean.</p>
                    <p class="lead" id="bastioninfo"></p>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- JukeAlert -->
    <section id="JukeAlert" class="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>JukeAlert - Monitor your claims</h2>
                    <p class="lead">Snitches will send you messages when other players enter their field so you can know where people are. JukeBox snitches will also log things like block breaks so you can know who to blame when someone griefs you.</p>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- FactoryMod -->
    <section id="FactoryMod" class="about bg-primary green">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h2 class="text-center">FactoryMod - Efficient production</h2>
                    <p class="lead text-center">Factories lets you craft items more efficiently after a slight startup cost. This allows for a more extended tech tree than vanilla Minecraft and allows you to have lasting infrastructure.</p>
                    <center><button onclick="showFactories(); return false;" class="btn btn-light" id="showfactories">Show Factories</button></center>
                    <br>
                    <div id="factories" style="overflow: hidden;">
                        <div id="sidebar" style="float: left; width: 200px; background-color: #e6e6e6;">
                            <input style="width: 100%; color: #000" type="text" id="search" onkeyup="searchfunction()" placeholder="Search..."></input>
                            <table style="width: 100%; display: block; overflow-y: scroll; height: 500px" class="table table-bordered" id="factorylist"></table>
                        </div>
                        <div id="main" style="color: #000; overflow: hidden;border-radius: 0px; height: 546px" class="well">
                            <h1 id="factoryName">Factory</h1>
                            <h2 id="setup">SetupCost:</h2>
                            <h2>Recipes:</h2>
                            <div id="recipes" style="margin-left: 20px; overflow-y: scroll" class="pre-scrollable"></div>
                        </div>
                        <div style="clear: both;"></div>
                    </div>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- NameLayer -->
    <section id="NameLayer" class="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>NameLayer - Group management</h2>
                    <p class="lead">NameLayer lets you create groups to manage who can access your citadel reinforced blocks and place in your bastion fields. You can also message people in groups together.</p>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- Enchanting -->
    <section id="Enchanting" class="about bg-primary green">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Enchanting - Reverted to 1.7</h2>
                    <p class="lead">There are a few important changes to enchanting on CivClassic. Experience is made through factories. The actual enchanting of items wont require lapis, but it will take the full amount of experience. Items will be repairable forever but will be expensive to repair in the long run, capping out at 39 levels with no reset.</p>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- PvPTweaks -->
    <section id="PvPTweaks" class="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>PvPTweaks - Make combat balanced again</h2>
                    <p class="lead">Ender pearls have a cooldown, health potions heal for more, and strength is reverted. Axes have reverted damage and click speed is increased from vanilla.</p>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- HiddenOre -->
    <section id="HiddenOre" class="about bg-primary green">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>HiddenOre - Ore balance and anti-xray</h2>
                    <p class="lead">Ores aren't pre-generated in the world, but spawn as you mine. You may be familiar with this plugin but it's been modified to simulate vanilla mining. It also now includes vein functionality. Ores will spawn in large clusters rather than randomly scattered everywhere.</p>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- SecureLogin -->
    <section id="SecureLogin" class="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>SecureLogin - Two factor authentication</h2>
                    <p class="lead">Use the command /secure to generate a unique IP address. Your account will then only be able to connect from that IP. This lets your account be more secure in case someone manages to steal your account info.</p>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- Miscellaneous Plugins -->
    <section id="MiscPlugins" class="about bg-primary green green">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Miscellaneous</h2>
                    <p class="lead">There will be no nether, there's a circular world border with a radius of 13k, and obsidian generators are re-enabled.</p>
                </div>
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container -->
    </section>
    
    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 col-lg-offset-1 text-center">
                    <h4><strong>CivClassic</strong>
                    </h4>
                    <ul class="list-unstyled">
                        <li><i class="fa fa-envelope-o fa-fw"></i> <a href="mailto:civclassic@gmail.com">civclassic@gmail.com</a>
                        </li>
                    </ul>
                    <br>
                    <ul class="list-inline">
                        <li>
                            <a href="http://reddit.com/r/civclassics"><i class="fa fa-reddit-square fa-fw fa-3x"></i></a>
                        </li>
                        <li>
                            <a href="http://twitter.com/civclassic"><i class="fa fa-twitter fa-fw fa-3x"></i></a>
                        </li>
                        <li>
                            <a href="https://www.youtube.com/channel/UCbPSa3YkorxGMpyFYSZql2A"><i class="fa fa-youtube-play fa-fw fa-3x"></i></a>
                        </li>
                    </ul>
                    <hr class="small">
                    <p class="text-muted">Copyright &copy; TealNerd 2016</p>
                </div>
            </div>
        </div>
        <a id="to-top" href="#top" class="btn btn-dark btn-lg"><i class="fa fa-chevron-up fa-fw fa-1x"></i></a>
    </footer>

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/3.7.0/js-yaml.min.js"></script>
    
    <script src="config.js"></script>
    <!-- Custom Theme JavaScript -->
    <script>
    // Closes the sidebar menu
    $("#menu-close").click(function(e) {
        e.preventDefault();
        $("#sidebar-wrapper").toggleClass("active");
    });
    // Opens the sidebar menu
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#sidebar-wrapper").toggleClass("active");
    });
    
    var factories;
    var recipes;
    var totalHealth;
    
    $(document).ready(function() {
        $("#factories").hide();
        $("#citadelcontainer").hide();
        factories = config.factories;
        recipes = config.recipes;
        totalHealth = config.default_health;
        $.each(factories, function(key, value) {
            $("#factorylist").append('<tr><td><a href="#FactoryMod" onclick="selectFactory(this); return false;" id="' + key + '">' + value.name + '</a></td></tr>');
        });
        loadFactory(factories[Object.keys(factories)[0]]);

        var pp = "https://raw.githubusercontent.com/CivClassic/Configs/master/prisonpearl.yml";
        $.get(pp, function(data) {
            var ppconf = jsyaml.load(data);
            var resource = ppconf.upkeep.resource;
            var amt = ppconf.upkeep.quantity;
            $('#pearlcost').html("Pearls cost " + amt + " " + resource.toLowerCase().replace(/_/, ' ') + " per day in the same container as the pearl or the pearl will be freed.");
        })

        var bastions = "https://raw.githubusercontent.com/CivClassic/Configs/master/bastion.yml";
        $.get(bastions, function(data) {
            var bconf = jsyaml.load(data);
            var base = bconf.bastions.basic;
            var info = "Bastions are a special " + base.block.material.toLowerCase().replace(/_/, ' ') + " with the name " + base.block.name + " and the lore \"" + base.block.lore + "\" which can be made in a factory. The shape is a " + (base.squarefield ? "square" : "circle") + " with a radius of " + base.effectRadius + " blocks and " + (base.includeY ? "includes" : "does not include") + " the y-level the bastion is on. Bastions will prevent block placement, but each block place will erode " + base.blocksToErode + " from the bastion's durability; This can only be done by a single player every " + (base.placementCooldown / 1000) + " seconds. Bastions will " + (base.pearls.block ? ("block pearls " + (base.pearls.blockMidair ? "midair" : "when they land") + (base.pearls.requireMaturity ? " and require the bastion to be mature" : "")) : "not block pearls") + " and will " + (base.elytra.block ? "block elytra" + (base.elytra.requireMaturity ? " when the bastion is mature" : "") : "not block elytra") + ".";
            $('#bastioninfo').html(info);
        });
    });
    
    function loadFactory(factory) {
        $("#recipes").scrollTop(0);
        $("#factoryName").text(factory.name);
        $("#recipes").html("");
        $("#setup").html("");
        if(factory.setupcost) {
            $("#setup").html("Setup Cost: ");
            $.each(factory.setupcost, function(key, value){
                $("#setup").append(value.amount + " " + key.replace(/_/g, ' ') + ", ");
            });
        } else {
            $.each(recipes, function(name, recipe) {
                if(recipe.type === "UPGRADE" && recipe.factory === factory.name) {
                    $.each(factories, function(id, f) {
                        if(f.recipes !== undefined && f.recipes.includes(name)) {
                            $("#setup").html('Upgrades from <a href="" onclick="selectFactory(this); return false;" id="' + f.name + '">' + f.name + "</a> with ");
                            $.each(recipe.input, function(key, item) {
                                $("#setup").append(item.amount + " " + key.replace(/_/g, ' ') + ', ');
                            });
                        }
                    });
                }
            });
        }
        var setupCost = $("#setup").html();
        setupCost = setupCost.substring(0, setupCost.length - 2);
        $("#setup").html(setupCost);
        var fuelName = Object.keys(config.default_fuel)[0];
        if(factory.fuel) {
            fuelName = Object.keys(factory.fuel)[0];
        }
        $.each(factory.recipes, function(i, name) {
            var recipe = recipes[name];
            $("#recipes").append('<div style="margin: 0 auto;">');
            $("#recipes").append('<h3>' + recipe.name + '</h3>');
            $("#recipes").append('<h4 id="in_' + name + '" style="margin-left: 20px">Input: </h4>');
            $.each(recipe.input, function(key, item) {
                $("#in_" + name).append(item.amount + " " + key.replace(/_/g, ' ') + ', ');
            });
            var text = $("#in_" + name).html();
            text = text.substring(0, text.length - 2);
            $("#in_" + name).html(text);
            if(recipe.type === "PRODUCTION") {
                $("#recipes").append('<h4 id="out_' + name + '" style="margin-left: 20px">Output: </h4>');
                $.each(recipe.output, function(key, item) {
                    $("#out_" + name).append(item.amount + " " + key.replace(/_/g, ' ') + ', ');
                });
                var txt = $("#out_" + name).html();
                txt = txt.substring(0, txt.length - 2);
                $("#out_" + name).html(txt);
            } else if(recipe.type === "UPGRADE") {
                $("#recipes").append('<h4 style="margin-left: 20px">Upgrades to: <a href="" onclick="selectFactory(this); return false;" id="' + recipe.factory + '">' + recipe.factory + '</a></h4>');
            } else if(recipe.type === "REPAIR") {
                var percent = (recipe.health_gained * 100) / totalHealth;
                $("#recipes").append('<h4 style="margin-left: 20px">Repairs ' + percent.toString() + '% health</h4>');
            } else  if(recipe.type === "RANDOM") {
                $("#recipes").append('<h4 id="out_' + name + '" style="margin-left: 20px">Outputs: </h4>');
                $("#recipes").append('<ul id="list_' + name + '" style="margin-left: 20px">');
                $.each(recipe.outputs, function(key, item) {
                    var percent = item.chance * 100;
                    if(percent < 0) {
                        percent = percent.toPrecision(1);
                    }
                    percent = percent.toString() + '%';
                    $("#list_" + name).append('<li>' + item[key].amount + ' ' + key.replace(/_/g, ' ') + ' with ' + percent + ' chance</li>');
                });
                $("#recipes").append('</ul>');
            }
            var prod_time = config.default_update_time;
            if(recipe.production_time) {
                prod_time = recipe.production_time;
            }
            $("#recipes").append('<h4 style="margin-left: 20px"> Production Time: ' + prod_time + '</h4>');
            var interval = parseInt(config.default_fuel_consumption_intervall);
            if(factory.fuel_consumption_intervall) {
                interval = parseInt(factory.fuel_consumption_intervall);
            }
            var famount = parseInt(prod_time) / interval;
            $("#recipes").append('<h4 style="margin-left: 20px"> Fuel: ' + famount + " " + fuelName + '</h4>');
            $("#recipes").append('</div>');
        });
    }
    
    function selectFactory(link) {
        var factory = factories[link.id];
        if(!factory) {
            $.each(factories, function(key, value) {
                if(value.name === link.id) {
                    loadFactory(value);
                }
            });
        } else {
            loadFactory(factory);
        }
    }
    
    var down = false;
    function showFactories() {
        if(down) {
            $("#factories").slideUp('fast', function() {
                down = false;
            });
            $("#showfactories").html('Show Factories');
        } else {
            $("#factories").slideDown('fast', function() {
                down = true;
            });
            $("#showfactories").html('Hide Factories');
        }
    }
    
    function searchfunction() {
        var input, filter, table, tr, td, i;
        input = document.getElementById("search");
        filter = input.value.toUpperCase();
        table = document.getElementById("factorylist");
        tr = table.getElementsByTagName("tr");
        for(i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[0];
            if(td) {
                if(td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
    
    // Scrolls to the selected menu item on the page
    $(function() {
        $('a[href*=#]:not([href=#],[data-toggle],[data-target],[data-slide])').click(function() {
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') || location.hostname == this.hostname) {
                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                if (target.length) {
                    $('html,body').animate({
                        scrollTop: target.offset().top
                    }, 1000);
                    return false;
                }
            }
        });
    });
    //#to-top button appears after scrolling
    var fixed = false;
    $(document).scroll(function() {
        if ($(this).scrollTop() > 250) {
            if (!fixed) {
                fixed = true;
                // $('#to-top').css({position:'fixed', display:'block'});
                $('#to-top').show("slow", function() {
                    $('#to-top').css({
                        position: 'fixed',
                        display: 'block'
                    });
                });
            }
        } else {
            if (fixed) {
                fixed = false;
                $('#to-top').hide("slow", function() {
                    $('#to-top').css({
                        display: 'none'
                    });
                });
            }
        }
    });
    </script>
</body>
</html>
